# RihuaManage (日华管理) - 中国系住民コミュニティプラットフォーム管理システム

## 概要
在日中国系住民のための総合コミュニティプラットフォーム「Rihua」の管理システムです。住まい・求人・イベント・チケット販売などの機能を提供するWebアプリケーションの包括的な管理機能を提供します。

## 業務要件

### 管理対象
- **ユーザー管理**: 一般ユーザー・事業者の登録・認証・権限管理
- **コンテンツ管理**: 投稿・コメント・住宅・求人情報の承認・削除
- **イベント管理**: 文化イベント・セミナーの企画・承認・参加者管理
- **チケット販売**: イベントチケットの種類・価格・在庫管理
- **レポート処理**: 不適切コンテンツの通報・対応管理
- **分析・レポート**: プラットフォーム利用状況の分析・KPI管理

### 管理者権限
- **super_admin**: 全機能アクセス・システム設定
- **admin**: ユーザー・コンテンツ管理
- **moderator**: コンテンツモデレーション・レポート処理
- **analyst**: 分析・レポート閲覧

## 機能要件

### 1. 認証・権限管理
- ロールベースアクセス制御（RBAC）
- セッション管理・自動ログアウト
- 管理者アカウントの作成・無効化
- 監査ログの記録・閲覧

### 2. ユーザー管理
- 一般ユーザー・事業者の一覧・詳細閲覧
- アカウント状態の変更（アクティブ・停止・禁止）
- 認証状態の管理（未認証・認証済み）
- ユーザー検索・フィルタリング

### 3. コンテンツ管理
- 投稿・コメントの承認・削除
- 住宅・求人情報の審査・公開管理
- 不適切コンテンツの一括処理
- カテゴリ別コンテンツ統計

### 4. イベント管理
- イベントの作成・編集・承認
- チケット種類・価格の設定
- 参加者リスト・売上管理
- イベント統計・分析

### 5. レポート・モデレーション
- 通報内容の確認・対応
- 自動検出システムとの連携
- 処理履歴の管理
- 対応状況の可視化

### 6. 分析・ダッシュボード
- KPI指標の可視化
- ユーザー成長率・活動状況
- 売上・収益分析
- カスタムレポート生成

## 技術スタック

### フロントエンド
- **フレームワーク**: React 18 + TypeScript
- **ビルドツール**: Vite
- **UIライブラリ**: Radix UI + shadcn/ui
- **スタイリング**: Tailwind CSS
- **ルーティング**: Wouter
- **状態管理**: React Query (TanStack Query)
- **チャート**: Recharts
- **アイコン**: Lucide React

### バックエンド
- **ランタイム**: Node.js 20
- **フレームワーク**: Express.js
- **言語**: TypeScript
- **データベース**: PostgreSQL (Neon Database)
- **ORM**: Drizzle ORM
- **認証**: Express Session + Connect-pg-simple
- **スキーマ検証**: Zod + Drizzle Zod

### 開発・デプロイ
- **開発環境**: Replit
- **パッケージマネージャー**: npm
- **データベース**: Neon Database (Serverless PostgreSQL)
- **ホスティング**: Replit Deployments
- **コード品質**: ESLint + TypeScript strict mode

### 主要依存関係
```json
{
  "react": "^18.2.0",
  "typescript": "^5.0.0",
  "express": "^4.18.0",
  "drizzle-orm": "latest",
  "@neondatabase/serverless": "latest",
  "@tanstack/react-query": "^5.0.0",
  "tailwindcss": "^3.3.0",
  "wouter": "^3.0.0"
}
```

## 開発環境セットアップ

### 前提条件
- Node.js 20以上
- npm
- PostgreSQL データベース（Neon Database推奨）

### インストール
```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

### 環境変数
```env
DATABASE_URL=postgresql://user:password@host:port/database
NODE_ENV=development
```

## プロジェクト構成

```
client/
├── src/
│   ├── components/          # UIコンポーネント
│   │   ├── ui/             # 基本UIコンポーネント
│   │   ├── layout/         # レイアウト関連
│   │   ├── auth/           # 認証関連
│   │   ├── charts/         # チャート・グラフ
│   │   └── content/        # コンテンツ管理
│   ├── pages/              # ページコンポーネント
│   │   ├── dashboard.tsx   # ダッシュボード
│   │   ├── users.tsx       # ユーザー管理
│   │   ├── events.tsx      # イベント管理
│   │   ├── content.tsx     # コンテンツ管理
│   │   ├── housing.tsx     # 住宅管理
│   │   ├── jobs.tsx        # 求人管理
│   │   ├── analytics.tsx   # 分析・レポート
│   │   └── settings.tsx    # システム設定
│   ├── hooks/              # カスタムフック
│   │   ├── use-auth.ts     # 認証フック
│   │   ├── use-theme.ts    # テーマフック
│   │   └── use-toast.ts    # 通知フック
│   ├── lib/                # ユーティリティ
│   │   ├── auth.ts         # 認証ユーティリティ
│   │   ├── utils.ts        # 共通ユーティリティ
│   │   └── queryClient.ts  # API クライアント
│   └── App.tsx             # アプリケーション本体

server/
├── index.ts                # サーバーエントリーポイント
├── routes.ts               # API ルート定義
├── storage.ts              # データストレージ抽象化
└── vite.ts                 # Vite 開発サーバー統合

shared/
└── schema.ts               # 共通データスキーマ
```

## 多言語対応

管理システムは中国語（简体中文）と日本語の完全バイリンガル対応を提供：

- 管理画面の完全多言語化
- コンテンツ審査での言語別表示
- 通知・メッセージの多言語対応
- 文化的コンテキストに応じた管理機能

## セキュリティ対策

### 認証・認可
- セッションベース認証
- ロールベースアクセス制御（RBAC）
- 権限の最小化原則
- 監査ログの完全記録

### データ保護
- 入力値検証・サニタイゼーション
- SQLインジェクション対策
- XSS攻撃対策
- CSRF トークン保護

### 運用セキュリティ
- セッション自動期限切れ
- 管理者操作の記録
- 不正アクセス検知
- 定期的なセキュリティ監査

## 監査・コンプライアンス

### 監査ログ
- 全ての管理操作の記録
- ユーザー情報変更の履歴
- コンテンツ変更の追跡
- システム設定変更の記録

### データ保持
- 個人情報保護法準拠
- GDPR対応（削除権等）
- データの最小化原則
- 適切な保存期間設定

## 現在のステータス

- **開発段階**: 基本機能実装完了
- **テスト環境**: Replit開発環境で動作確認済み
- **データベース**: メモリストレージでの動作確認済み
- **本番環境**: 未デプロイ

## 今後の予定

1. **PostgreSQL統合**
2. **本番環境デプロイ**
3. **パフォーマンス最適化**
4. **セキュリティ強化**
5. **モニタリング・アラート実装**
6. **API レート制限**
7. **バックアップ・災害復旧**

## 開発者向け情報

### コーディング規約
- TypeScript strict mode
- React Hooks パターン
- コンポーネント指向設計
- レスポンシブデザイン対応

### テスト戦略
- 単体テスト（Jest）
- 統合テスト（React Testing Library）
- E2Eテスト（Playwright）
- セキュリティテスト

### パフォーマンス指標
- ページロード時間 < 2秒
- API レスポンス時間 < 500ms
- データベースクエリ最適化
- メモリ使用量監視

## サポート・問い合わせ

開発に関する問い合わせは開発チームまでお願いします。

## ライセンス
プライベートプロジェクト